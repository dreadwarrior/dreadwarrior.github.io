(()=>{var t=e=>{const o=e.dataset.filterSource,i=e.dataset.filterTarget,n=e.querySelector("input"),a=e.querySelector("button[aria-controls]"),s=e.querySelector('button[type="reset"]'),t=new Awesomplete(n,{minChars:0,sort:!1,replace:function(e){this.input.value=e.label}});a.addEventListener("click",function(){t.ul.childNodes.length===0?t.evaluate():t.ul.hasAttribute("hidden")?t.open():t.close()}),s.addEventListener("click",()=>{n.value="",t.evaluate(),t.close()}),n.addEventListener("awesomplete-selectcomplete",e=>{const t=e.text.value;htmx.ajax("GET",t,{target:i,select:o})}),n.addEventListener("awesomplete-close",e=>{(e.reason==="blur"||e.reason==="esc")&&n.value===""&&s.click()})};function n(){const e=document.querySelector(".control-group--awesomplete");e!=null&&window.addEventListener("load",function(){t(e)})}function s(e){const t=document.querySelector(e);t.checked=localStorage.getItem("switchedTheme")==="true",t.addEventListener("change",function(e){e.currentTarget.checked===!0?localStorage.setItem("switchedTheme","true"):localStorage.removeItem("switchedTheme")})}function o(e){const t=document.querySelectorAll(e);document.addEventListener("click",function(e){t.forEach(t=>{const n=t.contains(e.target);n||t.removeAttribute("open")})})}function i(e){return fetch(e).then(e=>e.json()).then(e=>e.books).then(e=>e[Math.floor(Math.random()*e.length)])}function a(){return e=>Swal.fire({titleText:e.title,imageUrl:e.cover.url,imageWidth:e.cover.width,confirmButtonText:"Buch anzeigen",preConfirm:()=>e.permalink,showDenyButton:!0,denyButtonText:"Anderes Buch w\xE4hlen",showCloseButton:!0,buttonsStyling:!1,customClass:{confirmButton:"button button--primary pure-button",denyButton:"button button--secondary pure-button"}})}function r(t){return n=>{n.isConfirmed&&(window.location=n.value),n.isDenied&&e(t)}}function e(e){i(e).then(a()).then(r(e))}function c(t){const n=document.querySelector(t);n!=null&&n.addEventListener("click",()=>e(n.dataset.bookList))}function l(e){return(t,n)=>{e.remove(t),e.add(n)}}function d(){const t=document.querySelector("#main-menu-toggle"),n=l(t.querySelector(".fas").classList),e=document.querySelector(".navigation__wrap--main");t.addEventListener("click",()=>{const t=e.dataset.open;t==="false"?(e.dataset.open="true",n("fa-bars","fa-times")):(e.dataset.open="false",n("fa-times","fa-bars"))})}n(),s("#theme-switch"),o(".tooltip"),c(".book-chooser__button"),d()})()